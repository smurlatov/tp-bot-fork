# Travelpayouts Go Service

–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π Go —Å–µ—Ä–≤–∏—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞—Ñ—Ñ–∏–ª–∏–∞—Ç–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ —á–µ—Ä–µ–∑ **—Ä–µ–∞–ª—å–Ω—ã–π** Travelpayouts API.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üöÄ –õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –∏ –±—ã—Å—Ç—Ä—ã–π Go —Å–µ—Ä–≤–∏—Å  
- üîó –î–≤–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞: —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –∏–∑ URL –∏ –ø–æ –∏–º–µ–Ω–∏ –±—Ä–µ–Ω–¥–∞
- ‚úÖ **–†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Travelpayouts API** (`POST https://api.travelpayouts.com/links/v1/create`)
- üìä –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- üóÑÔ∏è SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –±—Ä–µ–Ω–¥–æ–≤
- üê≥ Docker –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è –ª–µ–≥–∫–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- üöÄ –ì–æ—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ Railway

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
POST /api/getFromLink    - –°–æ–∑–¥–∞–µ—Ç –∞—Ñ—Ñ–∏–ª–∏–∞—Ç–Ω—É—é —Å—Å—ã–ª–∫—É –∏–∑ –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–∏ —á–µ—Ä–µ–∑ Travelpayouts API
POST /api/getFromBrand   - –°–æ–∑–¥–∞–µ—Ç –∞—Ñ—Ñ–∏–ª–∏–∞—Ç–Ω—É—é —Å—Å—ã–ª–∫—É –ø–æ –∏–º–µ–Ω–∏ –±—Ä–µ–Ω–¥–∞ —á–µ—Ä–µ–∑ Travelpayouts API  
GET  /health             - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <your-repo>
cd tp-go-service

# –°–æ–±–∏—Ä–∞–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º
docker-compose up --build

# –°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8080
```

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
go mod tidy

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–∏—Å
go run .

# –°–µ—Ä–≤–∏—Å –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ http://localhost:8080
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –∏–∑ URL

```bash
curl -X POST http://localhost:8080/api/getFromLink \
  -H "Content-Type: application/json" \
  -d '{
    "link": "https://www.booking.com/hotel/us/plaza.html",
    "token": "YOUR_TRAVELPAYOUTS_TOKEN",
    "trs": "197987",
    "marker": "339296"
  }'
```

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "link": "https://yesim.tp.st/kn3kv29H?erid=2VtzqwiKLkx"
}
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –ø–æ –±—Ä–µ–Ω–¥—É

```bash
curl -X POST http://localhost:8080/api/getFromBrand \
  -H "Content-Type: application/json" \
  -d '{
    "brand_name": "booking",
    "token": "YOUR_TRAVELPAYOUTS_TOKEN",
    "trs": "197987",
    "marker": "339296"
  }'
```

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–µ–Ω–¥–∞–º–∏

–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –±—Ä–µ–Ω–¥ –º–æ–∂–Ω–æ –Ω–∞–ø—Ä—è–º—É—é –≤ SQLite –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

```sql
INSERT INTO brands (brand_name, brand_link) 
VALUES ('booking', 'https://www.booking.com/');
```

–ò–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å).

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- `PORT` - –ü–æ—Ä—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 8080)
- `DATABASE_PATH` - –ü—É—Ç—å –∫ SQLite –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- `GIN_MODE` - –†–µ–∂–∏–º Gin —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ (release/debug)

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Railway

1. –ö–æ–º–º–∏—Ç–∏–º –∫–æ–¥ –≤ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –ü–æ–¥–∫–ª—é—á–∞–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫ Railway
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç Dockerfile –∏ —Ä–∞–∑–≤–µ—Ä–Ω–µ—Ç —Å–µ—Ä–≤–∏—Å
4. –ü–æ–ª—É—á–∏–º –ø—É–±–ª–∏—á–Ω—ã–π URL –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
tp-go-service/
‚îú‚îÄ‚îÄ main.go              # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –º–∞—Ä—à—Ä—É—Ç—ã
‚îú‚îÄ‚îÄ travelpayouts.go     # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Travelpayouts API
‚îú‚îÄ‚îÄ go.mod              # Go –º–æ–¥—É–ª–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ Dockerfile          # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ docker-compose.yml  # Docker Compose –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ API.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
‚îî‚îÄ‚îÄ README.md           # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å `logrus`. –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API, –æ—à–∏–±–∫–∏ –∏ —É—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ —É—Ä–æ–≤–Ω—è–º–∏ –≤–∞–∂–Ω–æ—Å—Ç–∏.

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–°–µ—Ä–≤–∏—Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –æ—Ç Travelpayouts API –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Go 1.21** - –û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫
- **Gin** - HTTP –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **GORM** - ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **SQLite** - –õ–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Logrus** - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Docker** - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
